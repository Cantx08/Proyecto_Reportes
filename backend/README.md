# üéì Sistema de Publicaciones Acad√©micas

> **API REST para consultar y analizar publicaciones acad√©micas de Scopus con arquitectura limpia y principios SOLID**

[![FastAPI](https://img.shields.io/badge/FastAPI-0.100+-00a693?style=flat&logo=fastapi)](https://fastapi.tiangolo.com)
[![Python](https://img.shields.io/badge/Python-3.9+-3776ab?style=flat&logo=python&logoColor=white)](https://python.org)
[![Clean Architecture](https://img.shields.io/badge/Architecture-Clean-blue?style=flat)](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)
[![SOLID](https://img.shields.io/badge/Principles-SOLID-green?style=flat)](https://en.wikipedia.org/wiki/SOLID)

## üìã Tabla de Contenidos

- [üéØ Descripci√≥n](#descripci√≥n)
- [‚ú® Caracter√≠sticas](#caracter√≠sticas)
- [üèóÔ∏è Arquitectura](#arquitectura)
- [üéØ Principios Aplicados](#principios-aplicados)
- [üöÄ Instalaci√≥n](#instalaci√≥n)
- [üìö Uso de la API](#uso-de-la-api)
- [üîß Configuraci√≥n](#configuraci√≥n)
- [üß™ Testing](#testing)
- [üìñ Documentaci√≥n](#documentaci√≥n)
- [ü§ù Contribuci√≥n](#contribuci√≥n)
- [üìÑ Licencia](#licencia)
- [üë• Autores](#autores)
- [üôè Agradecimientos](#agradecimientos)
- [üìà Beneficios de la Arquitectura](#beneficios-de-la-arquitectura)
- [üìù Notas T√©cnicas](#notas-t√©cnicas)

---

## üéØ Descripci√≥n

Este sistema permite consultar y analizar publicaciones acad√©micas de la base de datos **Scopus** de manera eficiente y escalable. Desarrollado con **Clean Architecture** y principios **SOLID**, proporciona endpoints REST para:

- üìÑ Obtener publicaciones de autores
- üìä Generar estad√≠sticas por a√±o
- üè∑Ô∏è Extraer √°reas tem√°ticas (subject areas)
- üìà Analizar tendencias de investigaci√≥n

---

## ‚ú® Caracter√≠sticas

### Funcionalidades Principales

- **Consulta de Publicaciones**: Obtiene publicaciones completas de uno o m√∫ltiples autores
- **An√°lisis Temporal**: Estad√≠sticas de publicaciones por a√±o con rangos completos
- **Categorizaci√≥n Tem√°tica**: Extracci√≥n de subject areas de publicaciones
- **Enriquecimiento de Datos**: Integraci√≥n con datos SJR para categor√≠as de revistas
- **Manejo de M√∫ltiples IDs**: Soporte para autores con m√∫ltiples identificadores Scopus

### Arquitectura y Calidad

- **Clean Architecture**: Separaci√≥n clara de responsabilidades por capas
- **Principios SOLID**: C√≥digo mantenible y extensible
- **Inyecci√≥n de Dependencias**: Desacoplamiento y testabilidad
- **Documentaci√≥n Autom√°tica**: Swagger UI integrado
- **Manejo de Errores**: Gesti√≥n robusta de excepciones
- **C√≥digo Autodocumentado**: Nombres descriptivos y funciones enfocadas

---

## üèóÔ∏è Arquitectura

La aplicaci√≥n sigue los principios de **Clean Architecture** con las siguientes capas:

```
backend/src/
‚îú‚îÄ‚îÄ domain/              # Capa de Dominio (Entidades y Reglas de Negocio)
‚îÇ   ‚îú‚îÄ‚îÄ entities.py      # Entidades del dominio
‚îÇ   ‚îú‚îÄ‚îÄ value_objects.py # Value Objects inmutables
‚îÇ   ‚îú‚îÄ‚îÄ interfaces.py    # Contratos/Interfaces
‚îÇ   ‚îî‚îÄ‚îÄ repositories.py  # Interfaces de repositorios
‚îú‚îÄ‚îÄ application/         # Capa de Aplicaci√≥n (Casos de Uso)
‚îÇ   ‚îú‚îÄ‚îÄ services.py      # Servicios de aplicaci√≥n existentes
‚îÇ   ‚îî‚îÄ‚îÄ report_application_service.py # Nuevo servicio de reportes
‚îú‚îÄ‚îÄ infrastructure/     # Capa de Infraestructura (Implementaciones)
‚îÇ   ‚îú‚îÄ‚îÄ chart_generator.py       # Generador de gr√°ficos (matplotlib)
‚îÇ   ‚îú‚îÄ‚îÄ style_manager.py         # Manejador de estilos (ReportLab)
‚îÇ   ‚îú‚îÄ‚îÄ publication_formatter.py # Formateador de publicaciones
‚îÇ   ‚îú‚îÄ‚îÄ content_builder.py       # Constructor de contenido
‚îÇ   ‚îú‚îÄ‚îÄ pdf_generator.py         # Generador principal de PDF
‚îÇ   ‚îî‚îÄ‚îÄ ... (otros repositorios)
‚îî‚îÄ‚îÄ presentation/       # Capa de Presentaci√≥n (Controladores/API)
    ‚îú‚îÄ‚îÄ controllers.py
    ‚îú‚îÄ‚îÄ report_controller.py # Controlador refactorizado
    ‚îî‚îÄ‚îÄ dtos.py
```

---

## üéØ Principios Aplicados

### Clean Code

- **Nombres descriptivos**: M√©todos y clases con nombres que expresan su intenci√≥n (`obtener_subject_areas` vs `get_data`)
- **Funciones peque√±as**: Cada m√©todo hace una sola cosa
- **Comentarios m√≠nimos**: El c√≥digo se autodocumenta
- **Manejo consistente de errores**: Validaciones expl√≠citas y excepciones espec√≠ficas

### SOLID Principles

1. **Single Responsibility Principle (SRP)**: Cada clase tiene una √∫nica responsabilidad bien definida
2. **Open/Closed Principle (OCP)**: Las interfaces permiten extensi√≥n sin modificaci√≥n
3. **Liskov Substitution Principle (LSP)**: Las implementaciones son intercambiables a trav√©s de sus interfaces
4. **Interface Segregation Principle (ISP)**: Interfaces espec√≠ficas y cohesivas
5. **Dependency Inversion Principle (DIP)**: Dependencias hacia abstracciones, no hacia concreciones

### Clean Architecture

- **Independencia de frameworks**: L√≥gica de negocio sin dependencias externas
- **Testabilidad**: Cada capa puede testearse independientemente
- **Flexibilidad**: Cambio de implementaciones sin afectar el negocio

---

## üöÄ Instalaci√≥n

### Requisitos Previos

- Python 3.9 o superior
- Clave API de Scopus ([Obtener aqu√≠](https://dev.elsevier.com))
- Archivo CSV de datos SJR

### Instalaci√≥n

1. **Clonar el repositorio**
    ```bash
    git clone https://github.com/Cantx08/Proyecto_Reportes.git
    cd Proyecto_Reportes/backend
    ```

2. **Crear entorno virtual**
    ```bash
    python -m venv venv
    # Windows
    venv\Scripts\activate
    # Linux/Mac
    source venv/bin/activate
    ```

3. **Instalar dependencias**
    ```bash
    pip install -r requirements.txt
    ```

4. **Configurar variables de entorno**
    ```bash
    # Crear archivo .env
    echo "SCOPUS_API_KEY=tu_clave_api_scopus" > .env
    echo "SJR_CSV_PATH=data/tu_archivo.csv" >> .env
    ```

5. **Iniciar la aplicaci√≥n**
    ```bash
    uvicorn main:app --reload
    ```

La API estar√° disponible en: `http://localhost:8000`

---

## üìö Uso de la API

### Endpoints Disponibles

#### üìÑ Obtener Publicaciones
```http
GET /scopus/publications?ids=00000000000&ids=12345678901
```
**Respuesta:**
```json
{
  "publicaciones": [
    {
      "id_autor": "00000000000,12345678901",
      "lista_publicaciones": [
        {
          "titulo": "T√≠tulo de la publicaci√≥n",
          "anio": "2025",
          "fuente": "Revista",
          "tipo_documento": "Articulo/Conferencia",
          "filiacion": "Instituci√≥n",
          "doi": "10.1000/xyz123",
          "categorias": "Categor√≠a 1 (Q1); Categor√≠a 2 (Q2)"
        }
      ]
    }
  ]
}
```

#### üìä Estad√≠sticas por A√±o
```http
GET /scopus/docs_by_year?ids=00000000000
```
**Respuesta:**
```json
{
  "author_ids": ["00000000000"],
  "documentos_por_anio": {
    "2020": 3,
    "2021": 5,
    "2022": 2,
    "2023": 4,
    "2024": 1
  }
}
```

#### üè∑Ô∏è √Åreas Tem√°ticas
```http
GET /scopus/subject_areas?ids=00000000000
```
**Respuesta:**
```json
{
  "author_ids": ["00000000000"],
  "subject_areas": [
    "Area 1",
    "Area 2",
    "Area 3",
    "Area 4"
  ]
}
```

#### ü©∫ Verificar Salud
```http
GET /health
```
**Respuesta:**
```json
{
  "status": "healthy",
  "message": "API funcionando correctamente"
}
```

### Documentaci√≥n Interactiva

- **Swagger UI**: `http://localhost:8000/docs`
- **ReDoc**: `http://localhost:8000/redoc`

---

## üîß Configuraci√≥n

### Variables de Entorno

| Variable         | Descripci√≥n                | Ejemplo                |
|------------------|---------------------------|------------------------|
| `SCOPUS_API_KEY` | Clave API de Scopus       | `abc123def456...`      |
| `SJR_CSV_PATH`   | Ruta al archivo CSV SJR   | `data/archivo.csv`     |

### Archivos de Datos

- **`data/archivo.csv`**: Datos SJR para categorizaci√≥n de revistas
- **`data/areas_categories.csv`**: Mapeo de √°reas y sub√°reas tem√°ticas

---

## üèóÔ∏è Componentes Principales

### Value Objects
```python
@dataclass(frozen=True)
class DocenteInfo:
    """Value Object inmutable para informaci√≥n del docente."""
    nombre: str
    genero: Genero
    departamento: str
    cargo: str
```

### Interfaces
```python
class IReportGenerator(ABC):
    """Interfaz principal para generaci√≥n de reportes."""
    
    @abstractmethod
    def generar_reporte(self, docente: DocenteInfo, ...) -> bytes:
        pass
```

### Servicios de Aplicaci√≥n
```python
class ReportApplicationService:
    """Servicio de aplicaci√≥n que orquesta la generaci√≥n de reportes."""
    
    def generar_reporte_certificacion(self, ...):
        # Validaciones
        # Transformaciones
        # Orquestaci√≥n
```

---

## üß™ Testing

### Ventajas de la Arquitectura para Testing

```python
# Ejemplo de test unitario
class MockScopusRepository(PublicacionesRepository):
    async def obtener_publicaciones_por_autor(self, author_id):
        return [PublicacionMock()]

# Test del servicio
def test_obtener_publicaciones():
    mock_repo = MockScopusRepository()
    service = PublicacionesService(mock_repo, mock_sjr_repo)
    result = await service.obtener_publicaciones_agrupadas(["123"])
    assert len(result.autores) == 1
```

### Ejecutar Tests
```bash
# Instalar dependencias de testing
pip install pytest pytest-asyncio

# Ejecutar tests
pytest tests/
```

---

## üìñ Documentaci√≥n

### Casos de Uso Principales

1. **Investigador Individual**: Consultar publicaciones y tendencias de un autor
2. **An√°lisis Colaborativo**: Combinar publicaciones de m√∫ltiples coautores  
3. **Estudio Institucional**: Analizar producci√≥n acad√©mica de una instituci√≥n
4. **An√°lisis Tem√°tico**: Identificar √°reas de investigaci√≥n predominantes

### Ejemplos de Uso

#### Consulta Simple
```bash
curl "http://localhost:8000/scopus/publications?ids=00000000000"
```

#### M√∫ltiples Autores
```bash
curl "http://localhost:8000/scopus/subject_areas?ids=00000000000&ids=12345678901"
```

#### An√°lisis Temporal
```bash
curl "http://localhost:8000/scopus/docs_by_year?ids=00000000000"
```

---

## ü§ù Contribuci√≥n

### Gu√≠a para Contribuir

1. **Fork** el repositorio
2. **Crear** una rama para tu feature (`git checkout -b feature/nueva-funcionalidad`)
3. **Seguir** los principios de Clean Code y SOLID
4. **Escribir** tests para tu c√≥digo
5. **Commit** tus cambios (`git commit -m 'Agregar nueva funcionalidad'`)
6. **Push** a la rama (`git push origin feature/nueva-funcionalidad`)
7. **Crear** un Pull Request

### Est√°ndares de C√≥digo

- Seguir principios SOLID
- Aplicar Clean Code
- Documentar funciones complejas
- Escribir tests unitarios
- Mantener cobertura de tests > 80%

### Reportar Bugs

Usa el [sistema de issues](https://github.com/Cantx08/Proyecto_Reportes/issues) incluyendo:

- Descripci√≥n detallada del problema
- Pasos para reproducir
- Comportamiento esperado vs actual
- Informaci√≥n del entorno (OS, Python version, etc.)

---

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT. Ver el archivo [LICENSE](LICENSE) para m√°s detalles.

---

## üë• Autores

- **Cantx08** - *Desarrollo inicial* - [GitHub](https://github.com/Cantx08)

---

## üôè Agradecimientos

- **Elsevier/Scopus** - Por proporcionar la API de datos acad√©micos
- **SCImago Journal Rank** - Por los datos de clasificaci√≥n de revistas
- **FastAPI Community** - Por el excelente framework web

---

<div align="center">

**¬øTe gust√≥ el proyecto?** ‚≠ê ¬°Dale una estrella en GitHub!

[üìö Documentaci√≥n](http://localhost:8000/docs) ‚Ä¢ [üêõ Reportar Bug](https://github.com/Cantx08/Proyecto_Reportes/issues) ‚Ä¢ [üí° Solicitar Feature](https://github.com/Cantx08/Proyecto_Reportes/issues)

</div>

---

## üìà Beneficios de la Arquitectura

1. **Mantenibilidad**: C√≥digo f√°cil de modificar y extender
2. **Testabilidad**: Componentes aislados y mockeables
3. **Reutilizaci√≥n**: Componentes intercambiables
4. **Separaci√≥n de Responsabilidades**: Cada capa tiene su prop√≥sito
5. **Independencia de Frameworks**: La l√≥gica de negocio no depende de tecnolog√≠as espec√≠ficas

---

## üìù Notas T√©cnicas

- **Inmutabilidad**: Los Value Objects son inmutables (frozen dataclasses)
- **Validaci√≥n**: Validaciones en la capa de aplicaci√≥n
- **Error Handling**: Excepciones espec√≠ficas (`ValueError` para datos inv√°lidos)
- **Inyecci√≥n de Dependencias**: Configuraci√≥n manual en el servicio de aplicaci√≥n
